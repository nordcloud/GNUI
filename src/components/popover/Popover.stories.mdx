import { Meta, Story, Canvas } from "@storybook/addon-docs";
import { Popover } from ".";
import { Button } from "../button";
import { Text } from "../text";
import { useDisclosure } from "../../hooks";

<Meta title="Components/Popover" component={Popover} />

# Popover

## Properties

> - `placement`: `top | bottom | right | left | top-start | top-end | bottom-start | bottom-end | right-start | right-end | left-start | left-end` > **optional** relative placement of Popover compared to parent element, defaults to `top`
> - `offset`: `number` **optional** offset is the distance from trigger to popover in pxs, defaults to `10`
> - `showArrow`: `boolean` **optional** show popover arrow, defaults to `true`
> - `triggerOn`: `click | hover` **optional** show popover on click or on hover, defaults to `click`
> - `openDelay`: `number` **optional** delay time in milliseconds for opening of popover, defaults to `0` (only works when triggerOn is set to `hover`)
> - `closeDelay`: `number` **optional** delay time in milliseconds for closing of popover, defaults to `0` (only works when triggerOn is set to `hover`)
> - `open`: `boolean` **optional** if this parameter is present - popover will be controlled instead of uncontrolled
> - `onOpenChange`: `(state: boolean) => void` **optional** fires on popover state change

## Placement

> Popover positions itself based on `placement` prop. If for any reasons (i.e. missing free space in window or frame) Popover is not able to position itself in desired position, it will flip sides preferring to be on top.

<Canvas>
  <Story name="Placement">
    <div style={{ display: "flex", justifyContent: "center" }}>
      <div
        style={{
          display: "grid",
          gridTemplateColumns: "repeat(1fr, 3)",
          gap: "1px",
          gridTemplate: `
          "top-start top top-end"
          "left-start . right-start"
          "left . right"
          "left-end . right-end"
          "bottom-start bottom bottom-end"
          `,
        }}
      >
        <div style={{ gridArea: "top-start" }}>
          <Popover placement="top-start">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">top-start</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "top" }}>
          <Popover placement="top">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">top</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "top-end" }}>
          <Popover placement="top-end">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">top-end</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "left-start" }}>
          <Popover placement="left-start">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">left-start</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "right-start" }}>
          <Popover placement="right-start">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">right-start</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "left" }}>
          <Popover placement="left">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">left</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "right" }}>
          <Popover placement="right">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">right</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "left-end" }}>
          <Popover placement="left-end">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">left-end</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "right-end" }}>
          <Popover placement="right-end">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">right-end</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "bottom-start" }}>
          <Popover placement="bottom-start">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">bottom-start</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "bottom" }}>
          <Popover placement="bottom">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">bottom</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
        <div style={{ gridArea: "bottom-end" }}>
          <Popover placement="bottom-end">
            <Popover.trigger>
              <div
                style={{
                  height: "3rem",
                  width: "7rem",
                  background: "#3498db",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                }}
              >
                <Text mb="0">bottom-end</Text>
              </div>
            </Popover.trigger>
            <Popover.content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
                <br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Vestibulum sollicitudin.
              </div>
            </Popover.content>
          </Popover>
        </div>
      </div>
    </div>
  </Story>
</Canvas>

## Offset

<Canvas>
  <Story name="Offset">
    <div style={{ display: "flex", justifyContent: "center", gap: "1rem" }}>
      <Popover>
        <Popover.trigger>
          <Button>I have default offset</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
      <Popover offset={30}>
        <Popover.trigger>
          <Button>I have offset of 30px</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
      <Popover offset={50}>
        <Popover.trigger>
          <Button>I have offset of 50px</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
    </div>
  </Story>
</Canvas>

## Hide Arrow

<Canvas>
  <Story name="Hide arrow">
    <div style={{ display: "flex", justifyContent: "center", gap: "1rem" }}>
      <Popover showArrow={false}>
        <Popover.trigger>
          <Button>I'm arrowless</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
      <Popover>
        <Popover.trigger>
          <Button>I have stylish arrow!</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
    </div>
  </Story>
</Canvas>

## Trigger on hover or click

<Canvas>
  <Story name="Trigger on hover or click">
    <div style={{ display: "flex", justifyContent: "center", gap: "1rem" }}>
      <Popover triggerOn="click">
        <Popover.trigger>
          <Button>I need click to show a popover</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
      <Popover triggerOn="hover">
        <Popover.trigger>
          <Button>I need just a hover</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
    </div>
  </Story>
</Canvas>

## Delays

<Canvas>
  <Story name="Delays">
    <div style={{ display: "flex", justifyContent: "center", gap: "1rem" }}>
      <Popover openDelay={1000} triggerOn="hover">
        <Popover.trigger>
          <Button>My Popover will open after 1s</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
      <Popover closeDelay={1000} triggerOn="hover">
        <Popover.trigger>
          <Button>My Popover will close after 1s</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
      <Popover closeDelay={1000} openDelay={1000} triggerOn="hover">
        <Popover.trigger>
          <Button>I have both delays</Button>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>
    </div>
  </Story>
</Canvas>

## Misc

### Usage over inline elements

<Canvas>
  <Story name="Inline Popover">
    <span style={{ color: "black" }}>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.{" "}
      <Popover>
        <Popover.trigger>
          <span style={{ color: "#3498db" }}>Vestibulum</span>
        </Popover.trigger>
        <Popover.content>
          <div>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
            sollicitudin.
          </div>
        </Popover.content>
      </Popover>{" "}
      sollicitudin.
    </span>
  </Story>
</Canvas>

### Controlled Popover

> It's possible to control Popover programmatically.

<Canvas>
  <Story name="Controlled Popover">
    {() => {
      const { isOpen, toggle } = useDisclosure();
      return (
        <div style={{ display: "flex", justifyContent: "center", gap: "5rem" }}>
          <Popover isOpen={isOpen}>
            <Popover.trigger>
              <Button disabled>Popover will appear here</Button>
            </Popover.trigger>
            <Popover.content>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit.
              Vestibulum sollicitudin.
            </Popover.content>
          </Popover>
          <Button onClick={toggle}>Click me!</Button>
        </div>
      );
    }}
  </Story>
</Canvas>

### Styling Popover

> It's possible to apply styles to Popover either by adding `css` or `$style` (notice `$`) to `Popover.content`. Styles will be applied to Popover container.
> Applying styles to arrow is possible by `css` property and targeting `svg`, or by using `$arrowProps` (once again, notice `$`). <br/>
> !!!BEWARE!!! - `style` won't work as we need to pass transient prop to `styled-components`.

<Canvas>
  <Story name="Styling Popover">
    <div style={{ display: "flex", justifyContent: "center" }}>
      <Popover>
        <Popover.trigger>
          <Button>I have stylish Popover!</Button>
        </Popover.trigger>
        <Popover.content
          $style={{
            maxWidth: "40rem",
            background:
              "linear-gradient(90deg, rgba(34,193,195,1) 0%, rgba(92,141,189,1) 21%, rgba(253,187,45,1) 51%, rgba(253,45,224,1) 73%)",
          }}
          $arrowProps={{ fill: "pink" }}
        >
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
          sollicitudin.
        </Popover.content>
      </Popover>
    </div>
  </Story>
</Canvas>
