import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import { LoadMore } from "./LoadMore";
import { LoadMoreList } from "./LoadMoreList";

<Meta title="Components/LoadMore" component={LoadMore} />

# Load More

The `LoadMore` component provides a "Show More" button that allows users to load additional items into an existing list. It can optionally display a count indicator showing the number of loaded items.

## Features

- "Show More" button to load additional items when clicked
- Optional count indicator showing current items and total (e.g., "1-5 of 15")
- Supports a loading state to disable the button during data fetching
- Automatically hides the button when all items are loaded
- Option to hide the count indicator with centered button layout

## Basic Usage

```jsx
import { LoadMore } from "@gnui/core";

// Inside your component
const MyList = () => {
  const [items, setItems] = useState([
    /* initial items */
  ]);
  const [isLoading, setIsLoading] = useState(false);

  const handleLoadMore = () => {
    setIsLoading(true);
    // Fetch more items, then:
    setItems([...items, ...newItems]);
    setIsLoading(false);
  };

  return (
    <div>
      <ul>
        {items.map((item) => (
          <li key={item.id}>{item.name}</li>
        ))}
      </ul>

      <LoadMore
        currentCount={items.length}
        total={totalItems}
        onLoadMore={handleLoadMore}
        isLoading={isLoading}
      />
    </div>
  );
};
```

## Examples

### Basic Example (with count)

Shows both the count indicator and "Show More" button:

<Canvas>
  <Story id="components-loadmore--basic" />
</Canvas>

### Without Count

Shows only the centered "Show More" button:

<Canvas>
  <Story id="components-loadmore--without-count" />
</Canvas>

### Mid-List Example

Shows the state when some items are loaded:

<Canvas>
  <Story id="components-loadmore--mid-list" />
</Canvas>

### End of List Example

Shows how the button is hidden when all items are loaded:

<Canvas>
  <Story id="components-loadmore--end-of-list" />
</Canvas>

### Loading State

Shows the button in a loading state:

<Canvas>
  <Story id="components-loadmore--loading" />
</Canvas>

### Working Example with List

A complete example showing the component in use with a list:

<Canvas>
  <Story id="components-loadmore--with-list" />
</Canvas>

## Props

<ArgsTable of={LoadMore} />

## Accessibility

The component follows accessibility best practices:

- The "Show More" button is properly labeled for screen readers
- The button is disabled during loading states to prevent multiple clicks
- The count indicator (when shown) provides context about the loaded items

## Usage Guidelines

1. **With Count (Default)**

   ```jsx
   <LoadMore currentCount={5} total={15} onLoadMore={handleLoadMore} />
   ```

2. **Without Count (Centered Button)**

   ```jsx
   <LoadMore currentCount={5} total={15} onLoadMore={handleLoadMore} hideCount={true} />
   ```

3. **With Loading State**
   ```jsx
   <LoadMore currentCount={5} total={15} onLoadMore={handleLoadMore} isLoading={true} />
   ```

## Design Considerations

- The count indicator uses the same styling as other pagination components for consistency
- When `hideCount` is true, the button is automatically centered
- The button uses the link color and underline hover effect for a lightweight appearance
- Loading state is visually indicated while maintaining the button's position
